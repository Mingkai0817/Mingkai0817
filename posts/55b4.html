<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Wireshark抓包分析理解DHCP协议及工作流程 | Mingkai's Blog</title><meta name="author" content="Mingkai"><meta name="copyright" content="Mingkai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、DHCP简介 DHCP（Dynamic Host Configuration Protocol）动态主机配置协议，前身是BOOTP协议。在大型局域网中，需要给很多主机配置地址信息，如果采用传统手工配置（累死），效率太低，因此采用此协议可以很方便的给主机配置各种地址信息，例如IP地址，SubMask、网关地址、DNS等等。   下面进行简单介绍，下面所述中Client值得就是DHCP Clien">
<meta property="og:type" content="article">
<meta property="og:title" content="Wireshark抓包分析理解DHCP协议及工作流程">
<meta property="og:url" content="http://example.com/posts/55b4.html">
<meta property="og:site_name" content="Mingkai&#39;s Blog">
<meta property="og:description" content="一、DHCP简介 DHCP（Dynamic Host Configuration Protocol）动态主机配置协议，前身是BOOTP协议。在大型局域网中，需要给很多主机配置地址信息，如果采用传统手工配置（累死），效率太低，因此采用此协议可以很方便的给主机配置各种地址信息，例如IP地址，SubMask、网关地址、DNS等等。   下面进行简单介绍，下面所述中Client值得就是DHCP Clien">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2024-06-26T02:26:00.000Z">
<meta property="article:modified_time" content="2025-02-12T23:35:46.533Z">
<meta property="article:author" content="Mingkai">
<meta property="article:tag" content="Wireshark抓包">
<meta property="article:tag" content="DHCP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Wireshark抓包分析理解DHCP协议及工作流程",
  "url": "http://example.com/posts/55b4.html",
  "image": "http://example.com/img/butterfly-icon.png",
  "datePublished": "2024-06-26T02:26:00.000Z",
  "dateModified": "2025-02-12T23:35:46.533Z",
  "author": [
    {
      "@type": "Person",
      "name": "Mingkai",
      "url": "https://blog.mingkai.fun/"
    }
  ]
}</script><link rel="shortcut icon" href="https://chat.deepseek.com/favicon.svg"><link rel="canonical" href="http://example.com/posts/55b4.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":20,"languages":{"author":"作者: Mingkai","link":"链接: ","source":"来源: Mingkai's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Wireshark抓包分析理解DHCP协议及工作流程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/ft.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/background.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/images/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://chat.deepseek.com/favicon.svg" alt="Logo"><span class="site-name">Mingkai's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Wireshark抓包分析理解DHCP协议及工作流程</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/images/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Wireshark抓包分析理解DHCP协议及工作流程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-26T02:26:00.000Z" title="发表于 2024-06-26 10:26:00">2024-06-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-12T23:35:46.533Z" title="更新于 2025-02-13 07:35:46">2025-02-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:1,&quot;messagePrev&quot;:&quot;距离上次更新已经过去了&quot;,&quot;messageNext&quot;:&quot;天，该文章的内容可能已经过时。&quot;,&quot;postUpdate&quot;:&quot;2025-02-13 07:35:46&quot;}" hidden></div><h2 id="一、DHCP简介"><a href="#一、DHCP简介" class="headerlink" title="一、DHCP简介"></a>一、DHCP简介</h2><blockquote>
<p><code>DHCP（Dynamic Host Configuration Protocol）</code>动态主机配置协议，前身是BOOTP协议。在大型局域网中，需要给很多主机配置地址信息，如果采用传统手工配置（累死），效率太低，因此采用此协议可以很方便的给主机配置各种地址信息，例如IP地址，SubMask、网关地址、DNS等等。</p>
</blockquote>
<blockquote>
<p>下面进行简单介绍，下面所述中<code>Client值得就是DHCP Client，Server指的是DHCP Server</code>。</p>
</blockquote>
<hr>
<h3 id="1-DHCP协议理解"><a href="#1-DHCP协议理解" class="headerlink" title="(1)DHCP协议理解"></a>(1)DHCP协议理解</h3><ul>
<li><code>定义：</code>DHCP：Dynamic Host Configuration Protocol，动态主机配置协议，是一个应用在局域网中的网络协议，它使用UDP协议工作。</li>
<li><code>理解：</code>DHCP协议就是一个基于UDP协议工作在局域网内的网络协议，其最终的目的就是获取响应的IP地址，其中这过程中有多种分配方式，以及发送报文的格式要求等。</li>
<li><code>作用：</code>动态分配IP地址，过程自动化，终端无需一一手工配置，配置信息统一管理（DNS,网关），IP地址有限、需要大量配置IP地址、经常移动终端。</li>
<li><code>好处：</code>提高配置IP地址效率，减少配置工作量，减少IP地址冲突。</li>
<li><code>分配IP地址方式：</code><ul>
<li><code>（1）手工配置方式：</code>通过网络管理员手工配置某台客户端特定的IP地址，当客户端请求分配时，DHCP服务器就将手动配置的IP地址分配给客户端。。</li>
<li><code>（2）自动配置方式：</code>当DHCP客户端第一次想服务端租用到第一个IP地址后，就将这个IP地址永久分配给客户端使用。</li>
<li><code>（3）动态配置方式：</code>服务器暂时分配一个IP地址给客户端，根据租约到期或者续约租期的方式来管理分配的IP地址。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="2-DHCP报文格式"><a href="#2-DHCP报文格式" class="headerlink" title="(2)DHCP报文格式"></a>(2)DHCP报文格式</h3><h3 id="2-1-DHCP报文封装格式"><a href="#2-1-DHCP报文封装格式" class="headerlink" title="2.1 DHCP报文封装格式"></a>2.1 DHCP报文封装格式</h3><table>
<thead>
<tr>
<th>表头</th>
</tr>
</thead>
<tbody><tr>
<td><code>DHCP报文封装格式</code></td>
</tr>
<tr>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p><code>链路层头</code></p>
</blockquote>
<p> | </p>
<blockquote>
<p><code>IP头  20bytes</code></p>
</blockquote>
<p> | </p>
<blockquote>
<p><code>UDP头</code></p>
</blockquote>
<p> | </p>
<blockquote>
<p><code>DHCP报文</code></p>
</blockquote>
<p> |</p>
<hr>
<h3 id="2-2-DHCP报文格式"><a href="#2-2-DHCP报文格式" class="headerlink" title="2.2 DHCP报文格式"></a>2.2 DHCP报文格式</h3><blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2024.cnblogs.com/blog/3455765/202406/3455765-20240626083301811-829038666.png"></p>
</blockquote>
<ul>
<li><code>op：</code>1byte,是报文的操作类型，分为请求报文和响应报文，1为请求报文；2为响应报文。具体的报文类型在option字段中标识。</li>
<li><code>htype：</code>1byte,表示client硬件地址的类型，1表示以太网类型。</li>
<li><code>hlen：</code>1byte，硬件地址的长度，以太网的硬件地址长度为6bytes。</li>
<li><code>hops：</code>1byte，表示当前dhcp报文经过的DHCP中继的数目，每经过一个DHCP中继这个字段就加1.</li>
<li><code>xid：</code>4bytes，由client端产生的随机数，用于匹配请求和应答报文，就是匹配应答报文是对哪个请求报文做出应答。</li>
<li><code>secs：</code>2bytes，客户端进入IP地址申请进程的时间或者更新IP地址进程的时间；由客户端软件根据情况设定。目前没有使用，固定为0。</li>
<li><code>flags：</code>2bytes，是标志字段，16比特中只使用了最高位比特（即最左边的比特），<code>这个个比特是广播响应标识位，用来标识DHCP服务器发出的响应报文是广播还是单播，0是单播，1是广播</code>。其余的比特位保留不用，都为0。</li>
<li><code>ciaddr：</code>4bytes，是客户端的IP地址，可以是client自己的IP地址，也可以是server分配给client的IP地址。</li>
<li><code>yiaddr(Your IP Address)：</code>4bytes，是<code>server分配给client的IP地址</code>。</li>
<li><code>siaddr：</code>4bytes，是client端获取IP地址等信息的<code>server端的地址</code>。</li>
<li><code>giaddr：</code>4bytes，是client发出请求报文后经过的第一个中继的IP地址。</li>
<li><code>chaddr：</code>16bytes，是<code>client端的硬件地址</code>，在client发出报文时会把自己<code>网卡的硬件地址</code>写进这个字段。</li>
<li><code>sname：</code>64bytes，服务器主机名，是client端获取IP地址等信息的服务器名称。</li>
<li><code>file：</code>128bytes，是client的启动配置文件名，是服务器为client指定的启动配置文件名及路径信息，由服务器填写。</li>
<li><code>options</code>：是可选变长的选项字段，这个字段包含了<code>终端的初始配置信息和网络配置信息，包括报文类型，有效租期，DNS服务器的IP地址等配置信息</code>。</li>
</ul>
<blockquote>
<p>Options字段有很多项，是可选的，不同的报文option项可能不同。</p>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2024.cnblogs.com/blog/3455765/202406/3455765-20240626084809766-1692041272.png"></p>
</blockquote>
<blockquote>
<p>不同的option项有不同的含义，下面是一些常见的option项：</p>
</blockquote>
<ul>
<li><code>DHCP Message Type：</code>表示DHCP的报文类型。</li>
<li><code>Client identifier:</code>   client端的硬件地址</li>
<li><code>Server identifier:</code>  服务器的IP地址</li>
<li><code>Subnet Mask:</code>  子网掩码</li>
<li><code>route:</code>  网关IP地址</li>
<li><code>Domain Name Server:</code> DNS服务器的IP地址</li>
<li><code>IP Address Lease Time:</code> 租约时间</li>
</ul>
<hr>
<h3 id="3-DHCP报文的种类"><a href="#3-DHCP报文的种类" class="headerlink" title="(3)DHCP报文的种类"></a>(3)DHCP报文的种类</h3><blockquote>
<p>Dhcp协议一共有8种报文，包括：<code>DHCP Dsicover</code>，<code>DHCP Offer</code>，<code>DHCP Request</code>，<code>DHCP ACK</code>，<code>DHCP NAK</code>，<code>DHCP Release</code>，<code>DHCP Decline</code>，<code>DHCP Inform</code>。</p>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2024.cnblogs.com/blog/3455765/202406/3455765-20240626082426661-1141126169.png"></p>
</blockquote>
<blockquote>
<p>报文类型由options字段中的<code>option53DHCP Message Type</code>选项来确定。各报文的具体含义如下：</p>
</blockquote>
<blockquote>
<p><code>1.DHCP Dsicover</code>报文：0x01  客户端请求包</p>
</blockquote>
<blockquote>
<p>这个报文是client端开始dhcp过程的第一个请求报文，client在请求地址时，并不知道server端的位置，所以client会以广播的方式发送请求报文，它的目的是发现网络中的服务器。</p>
</blockquote>
<h3 id="2-DHCP-Offer报文：-0x02-服务器响应包"><a href="#2-DHCP-Offer报文：-0x02-服务器响应包" class="headerlink" title="2.DHCP Offer报文： 0x02  服务器响应包"></a><code>2.DHCP Offer</code>报文： 0x02  服务器响应包</h3><blockquote>
<p>这个报文server端对DISCOVERY报文的响应报文。会在所配置的地址池中查找一个合适的IP地址，加上相应的租约期限和其他配置信息（如GATEWAY，DNS SERVER等），构造一个OFFER报文，发送给用户，告知用户本SERVER可以为其提供IP地址的分配，并且。发OFFER报文一般是单播的方式发送。</p>
</blockquote>
<h3 id="3-DHCP-Request报文：0x03-客户端选择包"><a href="#3-DHCP-Request报文：0x03-客户端选择包" class="headerlink" title="3.DHCP Request报文：0x03 客户端选择包"></a>3.<code>DHCP Request</code>报文：0x03 客户端选择包</h3><blockquote>
<p>在一个子网中可能有多台服务器，所有收到DISCOVER报文的服务器都会回应OFFER报文，所以client端可能收到多个OFFER报文，通常会选择第一个OFFER报文的服务器作为自己的目标服务器，并回应一个REQUEST请求报文。在续租约的时候client端也会发送REQUEST报文  请求续租期。</p>
</blockquote>
<h3 id="4-DHCP-ACK报文：0x05-服务器确认包"><a href="#4-DHCP-ACK报文：0x05-服务器确认包" class="headerlink" title="4.DHCP ACK报文：0x05  服务器确认包"></a>4.<code>DHCP ACK</code>报文：0x05  服务器确认包</h3><blockquote>
<p>是server对client端的REQUEST报文的确认响应报文，server在收到REQUEST报文后，根据REQUEST报文中携带的client MAC来查找有没有相应的租约记录，如果有则发送ACK报文作为回应，通知client可以使用分配的IP地址。</p>
</blockquote>
<h3 id="5-DHCP-NAK报文：0x06-服务器拒绝包"><a href="#5-DHCP-NAK报文：0x06-服务器拒绝包" class="headerlink" title="5.DHCP NAK报文：0x06  服务器拒绝包"></a>5.<code>DHCP NAK</code>报文：0x06  服务器拒绝包</h3><blockquote>
<p>Server端对client端的REQUEST报文的拒绝响应报文，如果服务器没有相应的租约记录，就会发送NAK报文给client端。</p>
</blockquote>
<h3 id="6-DHCP-Release报文：0x07-客户端释放包"><a href="#6-DHCP-Release报文：0x07-客户端释放包" class="headerlink" title="6.DHCP Release报文：0x07  客户端释放包"></a>6.<code>DHCP Release</code>报文：0x07  客户端释放包</h3><blockquote>
<p>Client端主动释放server端分配给它的IP是，就会发送DHCP-RELEASE报文给server，server收到这个报文后，就会回收这个IP地址。</p>
</blockquote>
<h3 id="7-DHCP-Decline：0x04"><a href="#7-DHCP-Decline：0x04" class="headerlink" title="7.DHCP Decline：0x04"></a>7.<code>DHCP Decline</code>：0x04</h3><blockquote>
<p>client收到server回应的ACK报文后，通过地址冲突检测发现 SERVER分配的地址冲突或由于其它原因导致不能使用，则发送DHCP-DECLINE报文，通知server所分配的IP地址不可用。</p>
</blockquote>
<h3 id="8-DHCP-Inform报文：0x08"><a href="#8-DHCP-Inform报文：0x08" class="headerlink" title="8.DHCP Inform报文：0x08"></a>8.<code>DHCP Inform</code>报文：0x08</h3><blockquote>
<p>在client已经获得了IP地址，需要从server端获得更详细的配置信息时，就会发送DHCP-INFORM报文向server请求，server在收到这个报文后，会根据租约查找，找到相应的配置信息后，就会回应DHCP-ACK报文给client。</p>
</blockquote>
<hr>
<h3 id="4-DHCP工作过程"><a href="#4-DHCP工作过程" class="headerlink" title="(4)DHCP工作过程"></a>(4)DHCP工作过程</h3><ol>
<li>客户端通过<code>广播</code>发送<code>DHCP Discover</code>报文<code>寻找DHCP服务端</code>。</li>
<li>服务端通过<code>单播</code>发送<code>DHCP Offer</code>报文向客户端<code>提供从地址池中挑选的可用IP等网络信息</code>。</li>
<li>客户端<code>只接收第一个收到的DHCP Offer报文</code>并<code>提取IP地址</code>，然后向通过<code>广播</code>发送<code>DHCP Request</code>报文告知<code>服务端要使用该IP地址</code>。</li>
<li>服务端通过<code>单播</code>发送<code>DHCP ACK</code>报文告知客户端<code>该IP地址是合法可用的，并提供租约信息</code>。</li>
</ol>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2024.cnblogs.com/blog/3455765/202406/3455765-20240626095948173-1489540212.png"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2024.cnblogs.com/blog/3455765/202406/3455765-20240626091113912-207253523.png"></p>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img2024.cnblogs.com/blog/3455765/202406/3455765-20240626090621635-1056664789.png"></p>
</blockquote>
<hr>
<h2 id="二、DHCP动态获取IP地址"><a href="#二、DHCP动态获取IP地址" class="headerlink" title="二、DHCP动态获取IP地址"></a>二、DHCP动态获取IP地址</h2><blockquote>
<p>DHCP动态获取IP地址的过程主要分为<code>发现Discover阶段</code>、<code>提供Offer阶段</code>、<code>选择Request阶段</code>、<code>确认ACK阶段</code>四个阶段。</p>
</blockquote>
<hr>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240625/383b1ad12029826203fb60a3a0c9988f8524.jpeg"></p>
</blockquote>
<h3 id="1-发现Discover阶段："><a href="#1-发现Discover阶段：" class="headerlink" title="(1)发现Discover阶段："></a>(1)<code>发现Discover阶段：</code></h3><blockquote>
<p>client端在局域网内以广播的方式发起一个<code>DHCP Discover广播报文</code>，目的是在子网络中发现能够给client端提供IP地址的server端。</p>
</blockquote>
<blockquote>
<p>特别要注意到的是，PC会随机出一个Transaction ID，如果之后收到的Offer报文中的Transaction ID与PC模拟出的不同，PC会将该Offer报文直接丢弃。</p>
</blockquote>
<blockquote>
<blockquote>
<p>UDP 目标端口号为67    源IP地址：0.0.0.0    目的IP地址：255.255.255.255</p>
</blockquote>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240625/2af2ff4d089208213c793cdee4601a492893.jpeg"></p>
</blockquote>
<hr>
<h3 id="2-提供Offer阶段："><a href="#2-提供Offer阶段：" class="headerlink" title="(2)提供Offer阶段："></a>(2)<code>提供Offer阶段：</code></h3><blockquote>
<p>局域网中DHCP server接受到Discover包之后，通过发送<code>DHCP offer</code>包给client端应答，主要是<code>告知client端可以提供IP地址，以及相应的IP地址租约信息和其他配置信息</code>也会在其中。</p>
</blockquote>
<blockquote>
<blockquote>
<p>UDP 目标端口号为68    源IP地址：172.22.192.1    目的IP地址：172.22.194.142</p>
</blockquote>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240626/1e9b99baade846ff7adf6664f3f7b4502091.jpeg"></p>
</blockquote>
<blockquote>
<blockquote>
<p>DHCP Offer报文中<code>Your(Client) IP Address</code>字段就是<code>DHCP Server能够提供给DHCP Client使用的IP地址</code>，且DHCP Server会将自己的IP地址放在option字段中<code>以便``DHCP Client``区分不同的``DHCP Server</code>。</p>
</blockquote>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240626/67ed2b59165024abcec484804a89d13b1333.jpeg"></p>
</blockquote>
<hr>
<h3 id="3-选择Request阶段："><a href="#3-选择Request阶段：" class="headerlink" title="(3)选择Request阶段："></a>(3)选择Request阶段：</h3><blockquote>
<p>在client端可能会接受到多个offer包，通常clientdaunt<code>只会接受收到的第一个DHCP offer报文</code>，然后client端就会以<code>广播的方式发送一个DHCP request报文请求分配IP地址</code>。</p>
</blockquote>
<blockquote>
<blockquote>
<p>UDP 目标67    源IP为0.0.0.0   目的IP:255.255.255.255</p>
</blockquote>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240626/6be0cef8dd138bed0cf40a7e3e25b71e5974.jpeg"></p>
</blockquote>
<blockquote>
<blockquote>
<p>DHCP Client只能处理其中的一个DHCP Offer报文，一般的原则是DHCP Client处理<code>最先收到的``DHCP Offer``报文</code>。DHCP Client会发出一个广播的DHCP <code>Request</code>报文，在<code>选项字段中会加入选中的``DHCP Server``的``IP``地址和需要的``IP``地址</code>。</p>
</blockquote>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240626/718a2638b6cdafa1d34270d9f7d204242624.jpeg"></p>
</blockquote>
<hr>
<h3 id="4-确认ACK阶段："><a href="#4-确认ACK阶段：" class="headerlink" title="(4)确认ACK阶段："></a>(4)确认ACK阶段：</h3><blockquote>
<p>server端在收到DHCP request报文之后，<code>会判断option字段的serverIP地址是否是自己的IP地址</code>，如果<code>符合分配IP地址的条件，就会给client发送一个DHCP ACK包</code>，如果<code>不满足就发挥发送一个DHCP NAK 包</code>。</p>
</blockquote>
<blockquote>
<blockquote>
<p>DHCP Server收到DHCP Request报文后，<code>判断选项字段中的``IP``地址是否与自己的地址相同</code>。<code>如果不相同，``DHCP Server``不做任何处理只清除相应``IP``地址分配记录</code>；如果相同，DHCP Server就会向DHCP Client响应一个DHCP ACK报文，并在选项字段中增加IP地址的使用租期信息。</p>
</blockquote>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240626/a5bc7d7483be508c11ca08850920dd4e5637.jpeg"></p>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240626/5864b6ce2a39d1b54e3c2031aa150b671871.jpeg"></p>
</blockquote>
<hr>
<h3 id="5-DHCP-Release"><a href="#5-DHCP-Release" class="headerlink" title="(5)DHCP Release"></a>(5)DHCP Release</h3><blockquote>
<blockquote>
<p>DHCP Client在成功获取IP地址后，<code>随时可以通过发送DHCP Release报文释放自己的IP地址</code>，DHCP Server收到DHCP Release报文后，<code>会回收相应的``IP地址并重新分配</code>。</p>
</blockquote>
</blockquote>
<blockquote>
<p>图中的5个报文，其中<code>DHCP Release</code>报文为PC释放IP时发出的报文。</p>
</blockquote>
<blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.rmb.bdstatic.com/bjh/240625/4e5ba75c42e3fb9b71b755488c07b3a1350.jpeg"></p>
</blockquote>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://blog.mingkai.fun/">Mingkai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/posts/55b4.html">http://example.com/posts/55b4.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Mingkai's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Wireshark%E6%8A%93%E5%8C%85/">Wireshark抓包</a><a class="post-meta__tags" href="/tags/DHCP/">DHCP</a></div><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>觉得对您有帮助的话，还请您赏个仨瓜俩枣～</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/Wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/Alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/3f12.html" title="Vulnhub靶机实战：from_sqli_to_shell_i386"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.picui.cn/free/2025/02/13/67acf9538b004.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Vulnhub靶机实战：from_sqli_to_shell_i386</div></div><div class="info-2"><div class="info-item-1">靶机官网：https://www.vulnhub.com/entry/pentester-lab-from-sql-injection-to-shell,80/ 靶机镜像ISO下载地址：（转链）from_sqli_to_shell_i386.iso - 4275.COM  一、启动靶机  二、查找靶机 IP 地址（2种方法）1.使用 netdiscover 命令：在 Kali 终端中，输入 netdiscover 命令，该命令会自动扫描局域网内的活跃主机，尝试查找靶机的 IP 地址。 1netdiscover   2.使用 arp - scan 命令：执行 arp - scan - l - D 命令，对同网段下的主机进行扫描。此命令通过发送 ARP 请求并接收响应，来获取局域网内设备的 IP 地址和 MAC 地址信息。 1arp-scan -l -D    三、端口扫描与服务探测1.全端口扫描：nmap –min - rate 10000 - p - 192.168.16.132 命令对靶机进行全端口扫描。该命令以较高的扫描速率（每分钟至少 10000...</div></div></div></a><a class="pagination-related" href="/posts/3eeb.html" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81DHCP%E7%AE%80%E4%BB%8B"><span class="toc-text">一、DHCP简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DHCP%E5%8D%8F%E8%AE%AE%E7%90%86%E8%A7%A3"><span class="toc-text">(1)DHCP协议理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-DHCP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-text">(2)DHCP报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-DHCP%E6%8A%A5%E6%96%87%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F"><span class="toc-text">2.1 DHCP报文封装格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-DHCP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-text">2.2 DHCP报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-DHCP%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-text">(3)DHCP报文的种类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-DHCP-Offer%E6%8A%A5%E6%96%87%EF%BC%9A-0x02-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E5%8C%85"><span class="toc-text">2.DHCP Offer报文： 0x02  服务器响应包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-DHCP-Request%E6%8A%A5%E6%96%87%EF%BC%9A0x03-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%89%E6%8B%A9%E5%8C%85"><span class="toc-text">3.DHCP Request报文：0x03 客户端选择包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-DHCP-ACK%E6%8A%A5%E6%96%87%EF%BC%9A0x05-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A1%AE%E8%AE%A4%E5%8C%85"><span class="toc-text">4.DHCP ACK报文：0x05  服务器确认包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-DHCP-NAK%E6%8A%A5%E6%96%87%EF%BC%9A0x06-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8B%92%E7%BB%9D%E5%8C%85"><span class="toc-text">5.DHCP NAK报文：0x06  服务器拒绝包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-DHCP-Release%E6%8A%A5%E6%96%87%EF%BC%9A0x07-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%87%8A%E6%94%BE%E5%8C%85"><span class="toc-text">6.DHCP Release报文：0x07  客户端释放包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-DHCP-Decline%EF%BC%9A0x04"><span class="toc-text">7.DHCP Decline：0x04</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-DHCP-Inform%E6%8A%A5%E6%96%87%EF%BC%9A0x08"><span class="toc-text">8.DHCP Inform报文：0x08</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-DHCP%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-text">(4)DHCP工作过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81DHCP%E5%8A%A8%E6%80%81%E8%8E%B7%E5%8F%96IP%E5%9C%B0%E5%9D%80"><span class="toc-text">二、DHCP动态获取IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8F%91%E7%8E%B0Discover%E9%98%B6%E6%AE%B5%EF%BC%9A"><span class="toc-text">(1)发现Discover阶段：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8F%90%E4%BE%9BOffer%E9%98%B6%E6%AE%B5%EF%BC%9A"><span class="toc-text">(2)提供Offer阶段：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%80%89%E6%8B%A9Request%E9%98%B6%E6%AE%B5%EF%BC%9A"><span class="toc-text">(3)选择Request阶段：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%A1%AE%E8%AE%A4ACK%E9%98%B6%E6%AE%B5%EF%BC%9A"><span class="toc-text">(4)确认ACK阶段：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-DHCP-Release"><span class="toc-text">(5)DHCP Release</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><!-- 页脚整体容器--><div id="footer-wrap"><!-- 页脚主要内容容器--><div id="ft"><!-- 左侧链接区块（靶场/工具/论坛）--><div class="ft-item-1"><div class="t-top"><!-- 左侧链接组（靶场和工具）--><div class="t-t-l"><!-- 在线靶场部分--><p class="ft-t t-l-t">在线靶场🌊</p><ul class="ft-links"><li><!-- 靶场链接列表--><a target="_blank" rel="noopener" href="https://www.nssctf.cn/index ">NSSCTF        //- 国家网络安全靶场</a><a target="_blank" rel="noopener" href="https://buuoj.cn/ ">BUUCTF                  //- 北京联合大学CTF平台</a><a target="_blank" rel="noopener" href="https://ctf.show/ ">ctfshow                //- CTF技能提升平台</a></li></ul><!-- 工具平台部分--><p class="ft-t t-l-t">工具平台⚙️</p><ul class="ft-links"><li><!-- 工具链接列表--><a target="_blank" rel="noopener" href="https://forum.ywhack.com/shell.php ">棱角社区  //- 安全工具平台</a><a target="_blank" rel="noopener" href="https://xssaq.com/ ">XSS安全平台              //- XSS漏洞测试</a><a target="_blank" rel="noopener" href="http://dnslog.cn/ ">DNSLog                 //- DNS查询工具</a><a target="_blank" rel="noopener" href="http://www.hiencode.com/ ">CTF在线工具        //- 综合CTF工具</a><a target="_blank" rel="noopener" href="https://www.csdn.net/ ">CSDN                //- 开发者社区</a></li></ul></div></div></div><!-- 右侧友链区块--><div class="ft-item-2"><p class="ft-t">推荐友链<(｀^′)> </p><div class="ft-img-group"><!-- 友链图片组--><div class="img-group-item"><a target="_blank" rel="noopener" href="https://zhang-blogs.cn/ " title="zhang的小屋"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/self.png " alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/ " title="Fomalhaut🥝"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/link/1-Fomalhaut.png " alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://fe32.top/ " title="唐志远の博客"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/link/1-%E5%94%90%E5%BF%97%E8%BF%9C.png " alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://akilar.top/ " title="Akilarの糖果屋"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/link/1-akilar.png " alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://butterfly.js.org/ " title="Butterfly"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/link/1-butterfly-author.png " alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://blog.anheyu.com/ " title="安知鱼"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/link/1-anzhiyu.png " alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://z0yuan.cn/ " title="z0yuanのBlog"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhang-blogs.cn/images/link/1-z0yuan.png " alt=""/></a></div></div></div></div><!-- 版权信息区块（条件判断）--><!-- 根据配置显示版权年份--><div class="copyright"><span><b>&copy;2024 - 2025</b></span><span><b>&nbsp;&nbsp;By Mingkai</b></span></div><div id="workboard"><!-- 技术栈徽章展示区--></div><p id="ghbdages"><!-- Hexo框架徽章--><a class="github-badge" target="_blank" href="https://hexo.io/ " style="margin-inline:5px" title="博客框架为Hexo_v7.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo_v7.3.0-%231E90FF?style=flat&amp;logo=hexo " alt="Hexo框架版本"/></a><!-- Butterfly主题徽章--><a class="github-badge" target="_blank" href="https://butterfly.js.org/ " style="margin-inline:5px" title="主题版本Butterfly_v5.3.2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly_v5.3.2-%239932CC%09?style=flat&amp;logo=element " alt="主题版本"/></a><!-- ICP备案信息徽章--><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/recordQuery" style="margin-inline:5px" title="本站暂未备案"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/ICP-%E6%9A%82%E6%9C%AA%E5%A4%87%E6%A1%88-%23B22222%09?style=flat&amp;logo=adguard" alt=""/></a><!-- 云服务器信息徽章--><a class="github-badge" target="_blank" href="https://cn.aliyun.com/" style="margin-inline:5px" title="本站源码部署在阿里云服务器上"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Server-%E9%98%BF%E9%87%8C%E4%BA%91-%23FFA500%09?style=flat&amp;logo=alibabacloud" alt=""/></a><!-- cdn加速服务提供商信息徽章--><a class="github-badge" target="_blank" href="https://cn.aliyun.com/" style="margin-inline:5px" title="本站使用xx云提供CDN加速与防护"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-XXX-%23008000%09?style=flat&amp;logo=speedtest" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><script type="text/javascript" src="https://unpkg.zhimg.com/jquery@latest/dist/jquery.min.js"></script><script defer src="/js/runtime.js"></script><script async data-pjax src="/js/txmap.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>